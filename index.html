<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Calculator</title>
    <!-- Bootstrap CDN for clean, professional look -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f8f9fa; /* Light background for the page */
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .calculator {
            background-color: #343a40; /* Dark background for the calculator body */
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            width: 320px; /* Fixed width for a compact calculator look */
        }
        #calculator-display {
            width: 100%;
            height: 60px;
            font-size: 2.5em;
            text-align: right;
            margin-bottom: 20px;
            border: none;
            border-radius: 5px;
            padding: 10px;
            background-color: #e9ecef; /* Light display background */
            color: #343a40; /* Dark text for display */
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
            overflow: hidden; /* Prevent text overflow */
            white-space: nowrap; /* Keep text on one line */
            text-overflow: clip; /* Clip overflowing text */
        }
        .calculator-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr); /* 4 columns, equal width */
            gap: 10px; /* Space between buttons */
        }
        .calculator-buttons button {
            width: 100%;
            height: 60px;
            font-size: 1.8em;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.1s ease;
            color: white;
            background-color: #6c757d; /* Default button color */
            outline: none; /* Remove outline on focus */
        }
        .calculator-buttons button:hover {
            opacity: 0.9;
            transform: translateY(-1px); /* Slight lift on hover */
        }
        .calculator-buttons button:active {
            transform: translateY(1px); /* Slight press effect */
        }
        .calculator-buttons .btn-number {
            background-color: #495057; /* Darker grey for numbers */
        }
        .calculator-buttons .btn-operator {
            background-color: #007bff; /* Blue for operators */
        }
        .calculator-buttons .btn-equals {
            background-color: #28a745; /* Green for equals */
        }
        .calculator-buttons .btn-clear {
            background-color: #dc3545; /* Red for clear */
        }
        /* Hover effects for specific button types */
        .calculator-buttons .btn-number:hover {
            background-color: #343a40;
        }
        .calculator-buttons .btn-operator:hover {
            background-color: #0056b3;
        }
        .calculator-buttons .btn-equals:hover {
            background-color: #218838;
        }
        .calculator-buttons .btn-clear:hover {
            background-color: #c82333;
        }
    </style>
</head>
<body>
    <div class="calculator">
        <input type="text" id="calculator-display" value="0" readonly aria-live="polite" aria-atomic="true">
        <div class="calculator-buttons">
            <button id="btn-clear" class="btn-clear" aria-label="Clear">C</button>
            <button id="btn-divide" class="btn-operator" aria-label="Divide">/</button>
            <button id="btn-multiply" class="btn-operator" aria-label="Multiply">*</button>
            <button id="btn-subtract" class="btn-operator" aria-label="Subtract">-</button>

            <button id="btn-7" class="btn-number" aria-label="Seven">7</button>
            <button id="btn-8" class="btn-number" aria-label="Eight">8</button>
            <button id="btn-9" class="btn-number" aria-label="Nine">9</button>
            <button id="btn-add" class="btn-operator" aria-label="Add">+</button>

            <button id="btn-4" class="btn-number" aria-label="Four">4</button>
            <button id="btn-5" class="btn-number" aria-label="Five">5</button>
            <button id="btn-6" class="btn-number" aria-label="Six">6</button>
            <button id="btn-decimal" class="btn-number" aria-label="Decimal point">.</button>

            <button id="btn-1" class="btn-number" aria-label="One">1</button>
            <button id="btn-2" class="btn-number" aria-label="Two">2</button>
            <button id="btn-3" class="btn-number" aria-label="Three">3</button>
            <button id="btn-0" class="btn-number" aria-label="Zero">0</button>

            <button id="btn-equals" class="btn-equals" style="grid-column: span 4;" aria-label="Equals">=</button>
        </div>
    </div>

    <script>
        const display = document.getElementById('calculator-display');
        let currentInput = '0'; // Stores the number currently being entered or the result
        let operator = null;     // Stores the pending operator (+, -, *, /)
        let previousInput = null; // Stores the first operand for a calculation
        let waitingForNewNumber = false; // Flag to indicate if the next digit should start a new number
        let hasDecimal = false;  // Flag to track if the current number already has a decimal point

        /**
         * Updates the calculator display with the current input.
         */
        function updateDisplay() {
            display.value = currentInput;
        }

        /**
         * Resets all calculator state variables to their initial values.
         */
        function clearAll() {
            currentInput = '0';
            operator = null;
            previousInput = null;
            waitingForNewNumber = false;
            hasDecimal = false;
            updateDisplay();
        }

        /**
         * Handles number and decimal button clicks.
         * @param {string} number - The digit or decimal point pressed.
         */
        function inputNumber(number) {
            if (waitingForNewNumber) {
                // If waiting for a new number (after an operator or equals),
                // start a fresh currentInput.
                currentInput = number;
                waitingForNewNumber = false;
                hasDecimal = (number === '.'); // If starting with '.', then it has a decimal
            } else {
                // Prevent multiple decimal points in a single number
                if (number === '.' && hasDecimal) {
                    return;
                }
                // Handle initial '0' replacement or appending digits
                if (currentInput === '0' && number !== '.') {
                    currentInput = number;
                } else if (number === '.') {
                    currentInput += number;
                    hasDecimal = true;
                } else {
                    currentInput += number;
                }
            }
            updateDisplay();
        }

        /**
         * Handles operator button clicks (+, -, *, /).
         * @param {string} nextOperator - The operator symbol pressed.
         */
        function handleOperator(nextOperator) {
            const inputValue = parseFloat(currentInput);

            if (previousInput === null && !isNaN(inputValue)) {
                // If this is the first operand, store it.
                previousInput = inputValue;
            } else if (operator) {
                // If there's a pending operation, perform it first.
                const result = calculate(previousInput, inputValue, operator);
                if (result === 'Error') {
                    currentInput = 'Error';
                    updateDisplay();
                    clearAll(); // Reset calculator after displaying error
                    return;
                }
                currentInput = String(result);
                previousInput = result; // The result becomes the new previousInput
            }

            operator = nextOperator;
            waitingForNewNumber = true; // Next digit input will start a new number
            hasDecimal = false; // Reset decimal flag for the next number
            updateDisplay(); // Show intermediate result or current input
        }

        /**
         * Performs the arithmetic calculation based on two numbers and an operator.
         * @param {number} num1 - The first operand.
         * @param {number} num2 - The second operand.
         * @param {string} op - The operator (+, -, *, /).
         * @returns {number|string} The result of the calculation or 'Error' for division by zero.
         */
        function calculate(num1, num2, op) {
            switch (op) {
                case '+':
                    return num1 + num2;
                case '-':
                    return num1 - num2;
                case '*':
                    return num1 * num2;
                case '/':
                    if (num2 === 0) return 'Error'; // Handle division by zero
                    return num1 / num2;
                default:
                    return num2; // Should not happen with current logic
            }
        }

        /**
         * Handles the equals button click, performing the final calculation.
         */
        function handleEquals() {
            if (operator === null || waitingForNewNumber) {
                // No pending operation or only one operand entered, do nothing.
                return;
            }

            const inputValue = parseFloat(currentInput);
            const result = calculate(previousInput, inputValue, operator);

            if (result === 'Error') {
                currentInput = 'Error';
                updateDisplay();
                clearAll(); // Reset calculator after displaying error
                return;
            }

            currentInput = String(result);
            operator = null; // Clear operator after calculation
            previousInput = null; // Clear previous operand
            waitingForNewNumber = true; // Ready for a new calculation or to continue with result
            hasDecimal = (currentInput.includes('.')); // Check if result has a decimal
            updateDisplay();
        }

        // Event Listeners for all buttons
        document.getElementById('btn-clear').addEventListener('click', clearAll);

        // Number buttons
        document.getElementById('btn-0').addEventListener('click', () => inputNumber('0'));
        document.getElementById('btn-1').addEventListener('click', () => inputNumber('1'));
        document.getElementById('btn-2').addEventListener('click', () => inputNumber('2'));
        document.getElementById('btn-3').addEventListener('click', () => inputNumber('3'));
        document.getElementById('btn-4').addEventListener('click', () => inputNumber('4'));
        document.getElementById('btn-5').addEventListener('click', () => inputNumber('5'));
        document.getElementById('btn-6').addEventListener('click', () => inputNumber('6'));
        document.getElementById('btn-7').addEventListener('click', () => inputNumber('7'));
        document.getElementById('btn-8').addEventListener('click', () => inputNumber('8'));
        document.getElementById('btn-9').addEventListener('click', () => inputNumber('9'));
        document.getElementById('btn-decimal').addEventListener('click', () => inputNumber('.'));

        // Operator buttons
        document.getElementById('btn-add').addEventListener('click', () => handleOperator('+'));
        document.getElementById('btn-subtract').addEventListener('click', () => handleOperator('-'));
        document.getElementById('btn-multiply').addEventListener('click', () => handleOperator('*'));
        document.getElementById('btn-divide').addEventListener('click', () => handleOperator('/'));

        // Equals button
        document.getElementById('btn-equals').addEventListener('click', handleEquals);

        // Initialize display on load
        updateDisplay();
    </script>
</body>
</html>